
const express = require('express')

const app = express()
const port = 8004


app.get('/redirect', (req,res)=> {
    console.log(req.query)


    const n = parseInt( req.query.n )
    
    console.log(n)
    if (n == 0){
        return res.redirect(req.query.url)
    }

    res.redirect('/redirect?n=' + (n-1) + '&url=' + encodeURIComponent(req.query.url))

    
})

app.get('/sleep', (req,res)=> {
    setTimeout(()=>{res.send('x')}, 25000)
})

app.listen(port, () => {
    console.log(`Example app listening on port ${port}`)
  })
  

// http://evil.xa.to:8004/redirect?n=35&url=http%3A%2F%2Fprint.challs.m0lecon.it%3A3000%2Flogin